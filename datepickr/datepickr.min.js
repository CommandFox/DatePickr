!function(){function a(a,e){for(var t=new Array,d=a;e>d;){d=d.addDays(1);var i=new Date(d);t.push({day:i.getDate(),month:i.getMonth(),year:i.getFullYear()})}return t}Date.prototype.addDays=function(a){var e=new Date(this.valueOf());return e.setDate(e.getDate()+a),e},Date.prototype.removeDays=function(a){var e=new Date(this.valueOf());return e.setDate(e.getDate()-a),e},$.each(["show","hide"],function(a,e){var t=$.fn[e];$.fn[e]=function(){return this.trigger(e),t.apply(this,arguments)}});var e=[],t=[];jQuery.extend(jQuery.fn,{within:function(a){return this.filter(function(){return $(this).closest(a).length})}}),$.fn.DatePickr=function(d){function i(){h.css("position","absolute"),"bottom"==d.position?h.css({top:r.offset().top+r.outerHeight()+10,left:r.offset().left}):"top"==d.position?h.css({bottom:r.offset().bottom+r.outerHeight()+10,left:r.offset().left}):"right"==d.position?h.css({top:r.offset().top,left:r.offset().left+r.outerWidth()+10}):"left"==d.position?h.css({top:r.offset().top,right:r.offset().right+r.outerWidth()+10}):h.css({top:r.offset().top+r.outerHeight()+10,left:r.offset().left})}function n(i,p){function g(){e[s].sort(function(a,e){return new Date(e.year,e.month,e.day)-new Date(a.year,a.month,a.day)})}h.empty(),h.append("<div class='datepickr-top'><span class='datepickr-left'>&lt;</span><span class='datepickr-date'><span class='datepickr-month'></span> <span class='datepickr-year'></span></span><span class='datepickr-right'>&gt;</span></div><div class='datepickr-weekdays'></div><div class='datepickr-days'></div>"),d.showDragNote&&d.draggable&&(h.append("<div class='datepickr-dragnote'></div>"),h.find(".datepickr-dragnote").html(d.dragNoteText));for(var l=h.find(".datepickr-weekdays"),f=["Su","Mo","Tu","We","Th","Fr","Sa"],k=0;k<f.length;k++)l.append("<span class='datepickr-weekday'>"+f[k]+"</span>");if(i%4===0&&i%100!==0||i%400===0)var y=!0;else var y=!1;var u=[31,y?29:28,31,30,31,30,31,31,30,31,30,31][p],m=new Date(i,p,0).getDate(),v=new Date(i,p,1).getDay();if(0==v)var D=6;else var D=v-1;var w=42-u-D;h.find(".datepickr-month").append(c[p]),h.find(".datepickr-year").append(i);var b=new Date,x=(new Date).addDays(1);"string"==typeof d.datemin?b=Date.parse(d.datemin):"object"==typeof d.datemin&&(b=new Date(d.datemin.getFullYear(),d.datemin.getMonth(),d.datemin.getDate())),"string"==typeof d.datemax?x=Date.parse(d.datemax):"object"==typeof d.datemax&&(x=new Date(d.datemax.getFullYear(),d.datemax.getMonth(),d.datemax.getDate()));for(var C=m-D;m+1>C;C++){var M=0==p?i-1:i,A=0==p?11:p-1,F=new Date(M,A,C);F>=b?h.find(".datepickr-days").append("<span class='datepickr-day datepickr-disabled datepickr-previous' data-day='"+C+"' data-month='"+A+"' data-year='"+M+"'>"+C+"</span>"):h.find(".datepickr-days").append("<span class='datepickr-day datepickr-disabled' data-day='"+C+"' data-month='"+A+"' data-year='"+M+"'>"+C+"</span>")}for(var C=1;u+1>C;C++){var Y=new Date(i,p,C);Y>=b&&x>=Y?h.find(".datepickr-days").append("<span class='datepickr-day' data-day='"+C+"' data-month='"+p+"' data-year='"+i+"'>"+C+"</span>"):b>=Y?h.find(".datepickr-days").append("<span class='datepickr-day datepickr-disabled' data-day='"+C+"' data-month='"+A+"' data-year='"+M+"'>"+C+"</span>"):Y>=x&&h.find(".datepickr-days").append("<span class='datepickr-day datepickr-disabled' data-day='"+C+"' data-month='"+A+"' data-year='"+M+"'>"+C+"</span>")}for(var C=1;w>C;C++){var j=11==p?i+1:i,H=11==p?0:p+1,J=new Date(j,H,C);x>=J?h.find(".datepickr-days").append("<span class='datepickr-day datepickr-disabled datepickr-next' data-day='"+C+"' data-month='"+H+"' data-year='"+j+"'>"+C+"</span>"):h.find(".datepickr-days").append("<span class='datepickr-day datepickr-disabled' data-day='"+C+"' data-month='"+H+"' data-year='"+j+"'>"+C+"</span>")}if($(".datepickr-disabled:not(.datepickr-next, .datepickr-previous)").css({cursor:"auto"}),e[s].length>0){var N=$.grep(e[s],function(a){return a.month==p&&a.year==i});$.each(N,function(a,e){h.find(".datepickr-day[data-day='"+e.day+"']:not(.datepickr-disabled)").addClass("datepickr-highlighted")});var N=!1}else"object"==typeof t[s]&&t[s].month==p&&t[s].year==i&&h.find(".datepickr-day[data-day='"+t[s].day+"']:not(.datepickr-disabled)").addClass("datepickr-highlighted");var S=!1,T=!1;$(window).keydown(function(a){var e=a.keyCode||a.which;e==d.dragKey&&(T=!0)}).keyup(function(a){var e=a.keyCode||a.which;e==d.dragKey&&(T=!1)}),h.find(".datepickr-day:not(.datepickr-disabled)").on("mousedown",function(t){if(1!==t.which)return!0;if(S=!0,T){$(this).prevAll(".datepickr-highlighted").length>0&&$(this).prevUntil(".datepickr-highlighted").addClass("datepickr-highlighted datepickr-dragging"),$(this).nextAll(".datepickr-highlighted").length>0&&$(this).nextUntil(".datepickr-highlighted").addClass("datepickr-highlighted datepickr-dragging"),g();var d=$(this).data("day"),r=$(this).data("month"),c=$(this).data("year"),l=new Date(c,r,d),f=e[s][e[s].length-1],k=f.day,y=f.month,u=f.year,m=new Date(u,y,k);l>m?e[s]=e[s].concat(a(m,l)):e[s]=e[s].concat(a(l.removeDays(1),m)),n(i,p)}else $(this).nextAll(".datepickr-highlighted").removeClass("datepickr-highlighted"),$(this).prevAll(".datepickr-highlighted").removeClass("datepickr-highlighted"),e[s]=[];return $(this).addClass("datepickr-highlighted datepickr-dragging"),o&&h.show(),!1}).on("mouseover",function(){S&&($(this).prevAll(".datepickr-highlighted").length>0&&($(this).prevUntil(".datepickr-highlighted").addClass("datepickr-highlighted datepickr-dragging"),$(this).nextAll(".datepickr-highlighted").removeClass("datepickr-highlighted datepickr-dragging")),$(this).nextAll(".datepickr-highlighted").length>0&&($(this).nextUntil(".datepickr-highlighted").addClass("datepickr-highlighted datepickr-dragging"),$(this).prevAll(".datepickr-highlighted").removeClass("datepickr-highlighted datepickr-dragging")),$(this).addClass("datepickr-highlighted datepickr-dragging"))}),$(document).on("mouseup",function(){if(S){if($(".datepickr-dragging").each(function(){var a=$(this).data("day"),t=$(this).data("month"),d=$(this).data("year");e[s].push({day:a,month:t,year:d})}),$(".datepickr-dragging").removeClass("datepickr-dragging"),o)if(e[s].length>1){g();var a=e[s][0],t=a.day+" "+c[a.month]+" "+a.year,i=e[s][e[s].length-1],n=i.day+" "+c[i.month]+" "+i.year;r.val(n+" - "+t)}else if(1==e[s].length){var a=e[s][0],t=a.day+" "+c[a.month]+" "+a.year;r.val(t)}var p={element:h,date:e[s]};d.onChange(p),h.trigger("datepickr:select",[e[s]]),r.trigger("datepickr:select",[e[s]]),h.trigger("change",[e[s]]),r.trigger("change",[e[s]])}S=!1}),d.draggable||($(document).off("mouseup"),h.find(".datepickr-day:not(.datepickr-disabled)").off("mousedown").off("mouseover").on("mousedown",function(){if($(".datepickr-highlighted").within(h).removeClass("datepickr-highlighted"),$(this).addClass("datepickr-highlighted"),t[s]={day:$(this).data("day"),month:$(this).data("month"),year:$(this).data("year")},o){var a=t[s].day+" "+c[t[s].month]+" "+t[s].year;r.val(a)}var e={element:h,date:t[s]};d.onChange(e),h.trigger("datepickr:select",[t[s]]),r.trigger("datepickr:select",[t[s]]),h.trigger("change",[t[s]]),r.trigger("change",[t[s]])})),h.find(".datepickr-left, .datepickr-previous").click(function(){0==p?(p=11,i-=1):p-=1;var a={element:h,month:p,year:i,direction:-1};d.onBeforeMonthChange(a),n(i,p),h.show(),d.onMonthChange(a)}),h.find(".datepickr-right, .datepickr-next").click(function(){11==p?(p=0,i+=1):p+=1;var a={element:h,month:p,year:i,direction:1};d.onBeforeMonthChange(a),n(i,p),h.show(),d.onMonthChange(a)})}var d=$.extend({datemin:"1 Jan 1995",datemax:"31 Dec 2035",draggable:!1,showDragNote:!0,dragNoteText:"Hold <kbd>shift</kbd> to continue selection on another month.",dragKey:16,onChange:function(){},onHide:function(){},onShow:function(){},onBeforeMonthChange:function(){},onMonthChange:function(){},position:"bottom"},d),r=this,o=r.is("input"),s=$(".datepickr").length;if(o){r.after("<div class='datepickr' data-pickr-id='"+s+"'></div>");var h=r.next(".datepickr[data-pickr-id='"+s+"']")}else{r.css({display:"inline-block"}),r.append("<div class='datepickr' data-pickr-id='"+s+"'></div>");var h=r.find(".datepickr[data-pickr-id='"+s+"']")}var c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],p=new Date,g=p.getMonth(),l=p.getFullYear();if(l%4===0&&l%100!==0||l%400===0)var f=!0;else var f=!1;var k=[31,f?29:28,31,30,31,30,31,31,30,31,30,31][g],y=new Date,u=(new Date).addDays(1);e[s]=[],t[s]=0,"string"==typeof d.datemin?y=Date.parse(d.datemin):"object"==typeof d.datemin&&(y=new Date(d.datemin.getFullYear(),d.datemin.getMonth(),d.datemin.getDate())),"string"==typeof d.datemax?u=Date.parse(d.datemax):"object"==typeof d.datemax&&(u=new Date(d.datemax.getFullYear(),d.datemax.getMonth(),d.datemax.getDate()));var m=(new Date(l,g,1),new Date(l,g,k+1));y>m?n(y.getFullYear(),y.getMonth()):m>u?n(u.getFullYear(),u.getMonth()):n(l,g),o&&(i(),$("*").on("show",function(){i()}),h.hide(),r.on("focus",function(){var a={element:h},e=h.show();d.onShow(a),$(document).bind("focusin.datepickr click.datepickr",function(a){if(!$(a.target).closest("[data-pickr-id='"+s+"']").length&&!$(a.target).closest(r).length){$(document).unbind(".datepickr");var t={element:h};e.hide(),d.onHide(t)}})}))},$(document).ready(function(){$("[data-datepickr]").each(function(){var a=$(this).data;$(this).DatePickr({datemin:a("datemin")||"1 Jan 1995",datemax:a("datemax")||"1 Dec 2035",draggable:$(this).is("[data-draggable]"),position:a("position")||"bottom"})})})}();
